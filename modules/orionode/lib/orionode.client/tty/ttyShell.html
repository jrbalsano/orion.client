<!DOCTYPE html>
<html>
<head>
	<meta name="copyright" content="Copyright (c) IBM Corporation and others 2012, 2014." >
	<meta http-equiv="Content-Language" content="en-us">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="icon" href="/images/shell.png" type="image/png">
	<title>Shell</title>
	<link rel="stylesheet" type="text/css" href="ttyPage.css" />
	<script src="../requirejs/require.js"></script>
	<script>
		/*global require*/
		require({
			baseUrl: "..",
			paths: {
				text: "requirejs/text",
				i18n: "requirejs/i18n",
				domReady: "requirejs/domReady",
				gcli: "gcli/gcli",
				util: "gcli/util"
			}
		});
		require(["ttyPage.js"]);
	</script>
	
	<style>
		.terminal {
			font-size: 14px;
			font-family: "DejaVu Sans Mono", "Liberation Mono", monospace;
		}
	</style>
	
	<script src="/socket.io/socket.io.js"></script>
	<script src="term.js"></script>
	<script>
    	;(function() {
        	window.onload = function() {
        		var socket = io.connect();
        		socket.on('connect', function() {
          			var term = new Terminal({
              			cols: 160,
              			rows: 24,
              			useStyle: true,
              			screenKeys: true
            		});
                       		
            		term.colors[1] = '#000000';
            		term.colors[256] = '#ffffff';
					term.colors[257] = '#ffcc99';
    
            		term.on('data', function(data) {
            			socket.emit('data', data);
            		});
    
            		term.on('title', function(title) {
            			document.title = title;
            		});
    
            		term.open(document.getElementById("terminalBox"));
    
            		term.write('\x1b[31mWelcome to your terminal emulator.\x1b[m\r\n');
    
            		socket.on('data', function(data) {
              			term.write(data);
            		});
    
            		socket.on('disconnect', function() {
              			term.destroy();
          			});
      			});
    		};
  		}).call(this);
	</script>
		
</head>
	<body id="orion-shellPage" class="orionPage">
		<div id="sideMenu" class="sideMenu"></div>
		<div id="pageContent" class="content-fixedHeight">
			<div class="fixedToolbarHolder mainpane mainPanelLayout">
				<div class="mainToolbar toolComposite" id="pageToolbar"></div>
				<div id="mainNode" class="toolbarTarget pageLayoutTarget toolbarTarget-toolbarHidden">
					<div id ="terminalBox"></div>
				</div>
			</div>
		</div>
		<div class="footer-fixed-bottom footer" id="footer"></div>
	</body>
</html>

